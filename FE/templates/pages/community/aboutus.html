{% extends 'base.html' %}

{% block content %}
  <style>
    .circle-container {
      display: flex;
      justify-content: space-around;
      margin: 20px;
    }
    
    .circle {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background-color: lightblue;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    
    .content-box {
      max-width: auto;
      border: none;
      display: none;
      justify-content: center;
      align-items: center;
      text-align: center;
      margin: 20px auto;
    }
    
    .main-container {
      margin-bottom: 10rem;
    }
    
    .content-user-profile {
      border: 1px solid ghostwhite;
      border-radius: 2rem;
    }
  </style>
  <div class="container-fluid page-header py-5 mb-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container text-center py-5">
      <h1 class="display-2 text-dark mb-4 animated slideInDown">About Us</h1>
      <nav aria-label="breadcrumb animated slideInDown">
        <ol class="breadcrumb justify-content-center mb-0 bg-transparent">
          <li class="breadcrumb-item">
            <a href="{% url 'community' %}">Community</a>
          </li>
          <li class="breadcrumb-item">
            <a href="news_list">News</a>
          </li>
        </ol>
      </nav>
    </div>
  </div>
  <div class="container main-container">
    <div class="circle-container mb-5">
      {% for profile in profiles %}
        <div class="row text-center">
          <div class="col mx-1 d-flex flex-column align-items-center mb-2">
            <div id="admin-{{ forloop.counter }}" class="circle" onclick="showContent({{ forloop.counter }})" style="background-image: url('{{ profile.profile_picture.url }}'); background-size: cover;"></div>
          </div>
          <label for="admin-{{ forloop.counter }}">{{ profile.user.get_full_name }}</label>
        </div>
      {% endfor %}
    </div>

    {% for profile in profiles %}
    <div class="content-box"  id="content{{ forloop.counter }}">
      <div class="container">
        <div class="content-user-profile">
          <div class="row justify-content-evenly">
            <div class="col-8">
              <div class="card">
                <div class="card-content-1 border-bottom">
                  <div class="card-header">이름</div>
                  <div class="card-body">{{ profile.user.get_full_name }}</div>
                </div>
                <div class="card-content-2 border-bottom">
                  <div class="card-header">소개</div>
                  <div class="card-body">{{ profile.profile_message }}</div>
                </div>
                <div class="card-content-3">
                  <div class="card-header">github</div>
                  <div class="card-body">{{ profile.git_address }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}

  <script>
    function showContent(index) {
      document.querySelectorAll('.content-box').forEach((box) => (box.style.display = 'none'))
      document.getElementById(`content${index}`).style.display = 'flex'
      // 백엔드: (설명) 해당 content-box에 admin의 profile을 동적으로 추가하는 부분입니다.
      // 서버에서 해당 정보를 받아오는 방식에 따라 구현이 달라질 수 있습니다.
      // 실제 서버에서 데이터를 받아오는 부분을 추가해야 합니다.
      // document.getElementById(`content${index}`).innerHTML = "{{ admin.profile }}";
    }
  </script>
{% endblock %}
